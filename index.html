<html>
    <head>
        <title>Makespan</title>
        <link href="res/style.css" rel="stylesheet"/>
    </head>
    <body>
        <div class="header">
            <h1></i>Judul Skripsweet</h1>
            <p>by Aisyah Nur Rahma</p>
        </div>
        <div class="declare">
            <div class="input-group">
                <label>Job Count</label>
                <input id="jobCount" type="number" min="1" placeholder="Min Number is 1"/>
            </div>
            <div class="input-group">
                <label>Machine Count</label>
                <input id="machineCount" type="number" min="1" placeholder="Min Number is 1"/>
            </div>
            <div class="input-group">
                <label>Firefly Count</label>
                <input id="ffCount" type="number" min="1" placeholder="Min Number is 1"/>
            </div>
			<div class="input-group">
                <button id="start">Start</button>
            </div>
        </div>
        <div class="flow-input" style="display: none;">
            <h2>Input Job Flow for Each Machine</h2>
            <p style="color: white; margin-top:0px;">Please input the flow sequence dived by a coma (,) and new line.</p>
			<textarea id="flow"></textarea>
        </div>
        <div class="time-input" style="display: none;">
            <h2>Input Job Processing Time for Each Machine</h2>
            <p style="color: white; margin-top:0px;">Please input the each job time per machine dived by a coma (,) and new line.</p>
            <textarea id="timing"></textarea>
            <button id="hitung">Calculate</button>
        </div>
        <div class="result" style="display: none;">
			<h2>Inputed Variable</h2>
			<small><p style="color: white; margin-top:0px;">Variable inputed by user.</p></small>
			<table id="tableDeklarasi" class="deklarasi">
				<tr>
					<th style="width:20%; text-align:center;">Variable</th>
					<th style="width:80%; text-align:center;">Value</th>
				</tr>
			</table>
			
			<h2>Generated Variable</h2>
			<small><p style="color: white; margin-top:0px;">Variable generated by app.</p></small>
			<table id="tableGenerate" class="deklarasi">
				<tr>
					<th style="width:20%; text-align:center;">Variable</th>
					<th style="width:80%; text-align:center;">Value</th>
				</tr>
			</table>
			
        	<div class="output">
				<p></p>
			</div>
        </div>
        <div class="watermark">
            <h1>Ibu/Bapak Dosen Tercintah, Lulusin aku yah</h1>
            <p>Aplikasi Ini dibuat untuk mendukung tugas akhir. Dibuat dengan penuh kasih sayang dan cinta kasih <br> pada skripsi yang telah membuat hidup kami penuh dengan cobaan.</p>
        </div>
    </body>
    <script src="res/jquery-3.1.1.min.js" type="text/javascript"></script>
    <script src="main.js?v=5" type="text/javascript"></script>
    <script type="text/javascript">
        var job = 0;
        var machine = 0;
        var firefly = 0;

        var jobFlow, proses;

        $('#start').click(function(){
//            // get all variable in first input
//            jobCount = $('#jobCount').val();
//            machineCount = $('#machineCount').val();
//            ffCount = $('#ffCount').val();
//            
//            // duplikat form input job flow
//            for(i=1; i<=parseInt(jobCount); i++){
//                label = $('<label>Job '+i+'</label>');
//                form = $('<input id="job'+i+'" type="text" placeholder="Example: 1, 3, 5, 4, 7, 2, 8, 9"/>');
//                flowGroup = $('<div class="flow-group"></div>');
//                
//                flowGroup.append(label, form);
//                $('.flow-input').append(flowGroup);
//            }
            
			// tutup hasil
			$('.result').slideUp();
			
            // tampilin form input flow
            $('.flow-input').slideDown(); 
            
            // tampilin form input time
            $('.time-input').slideDown();
        });

        $('#hitung').click(function(){
            // tutup tampilan form input
            $('.flow-input').slideUp();
            $('.time-input').slideUp();

            // ambil input dan store ke global
            job = $('#jobCount').val();
            machine = $('#machineCount').val();
            firefly = $('#ffCount').val();
			
			jobFlow = parsingInput($("#flow").val());
			proses = parsingInput($("#timing").val());

			console.log(jobFlow);
			console.log(proses);
			
			ij = 1;
			for(x in jobFlow){
				printOut('tableDeklarasi', [{ nama: 'Job '+ (ij++) +' Flow', msg: jobFlow[x].toString() }]);
			}
			
			ij = 1;
			for(x in proses){
				printOut('tableDeklarasi', [{ nama: 'Job'+ (ij++) +'/Machine Time', msg: proses[x].toString() }]);
			}
			
            // generate random number
            var numbs = generateMatriks(firefly, job * machine);
			var dTable = diskritTable(numbs, job);
			
			ij = 1;
			for(x in numbs){
				angka = new Array();
				for(y in numbs[x]){
					angka[y] = numbs[x][y].number;
				}
				msg = JSON.stringify(angka);
				$('#tableGenerate').append('<tr><td>Random Float'+(ij++)+' for firefly</td><td>'+msg+'</td>');
			}
			
			ij = 1;
			for(x in dTable){
				msg = JSON.stringify(getDNum(dTable, x));
				$('#tableGenerate').append('<tr><td>Firefly'+(ij++)+' Diskrit</td><td>'+msg+'</td>');
			}
			
			$('.result').slideDown();
			
//			for(x in numbs){
//				printOut('tableGenerate', [{ nama: 'Job'+ ( parseInt(x) + 1) +'/Machine Time', msg: proses[x].toString() }]);
//			}
			
			var f1 = getDNum(dTable, 0);
			console.log(f1);
			
			//printOut('tableDeklarasi', [{ nama: 'makespan', msg: runGantt(f1, jobFlow, proses, machine, job) }]);
        });
    </script>
</html>